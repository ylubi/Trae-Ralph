# Ralph 执行铁律 (Execution Iron Rules)

> **⚠️ 注意**: 这是 Ralph 开发流程的最高指令。所有 Agent 必须无条件遵守。每次行动前请自我检查。

## 1. 物理顺序优先 (Physical Order First)
- **规则**: 必须严格按照 `04-ralph-tasks.md` 和 `05-test-plan.md` 文件中的**行号物理顺序**执行任务。
- **禁止**: 严禁跳过当前未完成的条目去执行后面的任务（哪怕后面的看起来更容易）。
- **禁止**: 严禁跳过单元测试，进行后面的任务。
- **例外**: 只有当当前任务被明确标记为 `[-]` (Blocked) 并注明原因后，才允许跳过。

## 2. 测试即交付 (Test is Delivery)
- **规则**: 任何代码变更必须通过单元测试验证。
- **流程**: 编写代码 -> 编写/运行测试 -> 测试通过 -> 提交代码。
- **禁止**: **严禁跳过测试环节**。如果没有现有测试，必须编写新的测试用例。
- **验证**: 必须看到 `PASS` 或 `Success` 的终端输出，才能视为任务完成。

## 3. 状态真实性 (State Integrity)
- **规则**: `RALPH_STATE.md` 必须反映最真实的进度。
- **强制**: 只能进行`04-ralph-tasks.md` 或 `05-test-plan.md`中的任务、测试，如果需要进行其他任务、测试，必须先写入这两个文件，再进行。
- **强制**: 每完成一个任务/测试，**必须**修改 `04-ralph-tasks.md` 或 `05-test-plan.md`，将对应的 `[ ]` 改为 `[x]`。
- **操作**: 每次更新状态前，必须**重新扫描**任务文件 (`04`/`05`)，统计实际的 `[x]` 数量。
- **禁止**: 禁止仅凭记忆更新状态。如果状态文件与任务文件不一致，必须强制修正状态文件。

## 4. 单线程专注 (Single Thread Focus)
- **规则**: 每次只处理一个任务 ID (e.g., `T-AUTH-001`)。
- **禁止**: 禁止并发执行多个任务。
- **拒绝**: 如果用户在执行过程中插入无关话题，请礼貌拒绝并回归当前任务。
