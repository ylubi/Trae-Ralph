# Ralph è§„åˆ’æ¨¡å¼ (Planning Mode)

å½“æ£€æµ‹åˆ°ç”¨æˆ·æœ‰**æ–°çš„éœ€æ±‚**ï¼ˆæ— è®ºæ˜¯ä»é›¶å¼€å§‹çš„æ–°é¡¹ç›®ï¼Œè¿˜æ˜¯ç°æœ‰é¡¹ç›®çš„ç‰ˆæœ¬è¿­ä»£/æ–°åŠŸèƒ½å¼€å‘ï¼‰æ—¶ï¼ŒAgent å¿…é¡»è‡ªåŠ¨è¿›å…¥**Ralph é¦–å¸­æ¶æ„å¸ˆ**æ¨¡å¼ã€‚

## ğŸš€ æ ¸å¿ƒæŒ‡ä»¤ (Core Directive)

æœ¬æ¨¡å¼å®Œå…¨ç”± Skill **`ralph-planner`** é©±åŠ¨ã€‚

1.  **å¯åŠ¨/ç»§ç»­**: ä»»ä½•æ—¶å€™ï¼Œç›´æ¥è°ƒç”¨ Skill `ralph-planner`ã€‚
2.  **æ‰§è¡Œ**: ä¸¥æ ¼éµå¾ª Skill è¿”å›çš„æŒ‡ä»¤å’Œä»»åŠ¡å®šä¹‰ã€‚
3.  **å¾ªç¯**: å®Œæˆå½“å‰ Step åï¼Œå†æ¬¡è°ƒç”¨ Skill `ralph-planner`ï¼Œç›´åˆ° Skill å®£å¸ƒç»“æŸã€‚

> **æ³¨æ„**: æ‰€æœ‰çš„ **5-Round è¿­ä»£é€»è¾‘**ã€çŠ¶æ€ç®¡ç†ã€é˜²å¹»è§‰æ£€æŸ¥å‡å·²å°è£…åœ¨ Skill ä¸­ã€‚Agent æ— éœ€è®°å¿†å¤æ‚çš„æµç¨‹ï¼Œåªéœ€æœºæ¢°åœ°æ‰§è¡Œ Skill çš„æŒ‡ä»¤ã€‚

## 2. æ·±åº¦è§„åˆ’è¦æ±‚ (Deep Dive Planning)

ä¸ºäº†ç¡®ä¿éœ€æ±‚å¯è½åœ°ï¼ŒRalph å¿…é¡»æ‰§è¡Œ **â€œåŸå­çº§æ‹†è§£â€**ã€‚ç¦æ­¢ç”Ÿæˆæ¨¡ç³Šçš„æè¿°ï¼ˆå¦‚â€œå®ç°ç™»å½•åŠŸèƒ½â€ï¼‰ï¼Œå¿…é¡»æ‹†è§£åˆ°ä»£ç å®ç°æ‰€éœ€çš„æœ€å°ç²’åº¦ã€‚

#### 2.1 ç²’åº¦æ ‡å‡†
*   **Web ç•Œé¢**: å¿…é¡»å®šä¹‰åˆ° **é¡µé¢å…ƒç´  (UI Elements)** çº§åˆ«ã€‚
    *   âŒ é”™è¯¯: "ç™»å½•é¡µé¢"
    *   âœ… æ­£ç¡®: "ç™»å½•é¡µåŒ…å«ï¼šç”¨æˆ·åè¾“å…¥æ¡†(Emailæ ¼å¼æ ¡éªŒ)ã€å¯†ç æ¡†(æ”¯æŒæ˜¾éš)ã€ç™»å½•æŒ‰é’®(LoadingçŠ¶æ€)ã€å¿˜è®°å¯†ç é“¾æ¥"
*   **åç«¯ API**: å¿…é¡»å®šä¹‰åˆ° **å­—æ®µ (Fields)** çº§åˆ«ã€‚
    *   âŒ é”™è¯¯: "æä¾›ç™»å½•æ¥å£"
    *   âœ… æ­£ç¡®: "POST /login, Body: {email, password}, Response: {token, user_id}"

#### 2.2 è‡ªæˆ‘å®¡æŸ¥å¾ªç¯ (Refinement Loop)
åœ¨ç”Ÿæˆæ–‡æ¡£åˆç¨¿åï¼ŒAgent å¿…é¡»è¿›è¡Œä¸€è½®è‡ªæˆ‘å®¡æŸ¥ï¼š
1.  **Check**: "æˆ‘åˆ—å‡ºçš„æ‰€æœ‰é¡µé¢ï¼Œæ˜¯å¦éƒ½åŒ…å«äº†å…·ä½“çš„æŒ‰é’®å’Œè¾“å…¥æ¡†å®šä¹‰ï¼Ÿ"
2.  **Check**: "æˆ‘åˆ—å‡ºçš„æ‰€æœ‰ APIï¼Œæ˜¯å¦éƒ½å®šä¹‰äº† Request/Response ç»“æ„ï¼Ÿ"
3.  **Action**: å¦‚æœå‘ç°æ¨¡ç³Šæè¿°ï¼Œå¿…é¡»ç«‹å³è¡¥å……ç»†èŠ‚ï¼Œç›´åˆ°æ»¡è¶³åŸå­çº§æ ‡å‡†ã€‚

## 3. è‡ªåŠ¨è§¦å‘æµç¨‹ (Auto-Trigger Workflow)

å½“ä½ å‘ç°ç”¨æˆ·æƒ³è¦â€œåšä¸ªæ–°ä¸œè¥¿â€æˆ–â€œä¿®æ”¹ç°æœ‰åŠŸèƒ½â€æ—¶ï¼š

1.  **ç¡®å®šè¿­ä»£åç§° (Identify Iteration)**: 
    - æ ¹æ®ç”¨æˆ·æ„å›¾ï¼Œç”Ÿæˆä¸€ä¸ªç®€çŸ­çš„è‹±æ–‡ç›®å½•åï¼ˆkebab-caseï¼‰ã€‚
    - ä¾‹å¦‚ï¼šç”¨æˆ·è¯´â€œåŠ ä¸ªç™»å½•åŠŸèƒ½â€ -> ç›®å½•å: `feature-auth`ã€‚
    - ä¾‹å¦‚ï¼šç”¨æˆ·è¯´â€œåˆå§‹åŒ–é¡¹ç›®â€ -> ç›®å½•å: `v1.0-init`ã€‚

2.  **åˆ›å»ºå­ç›®å½• (Create Workspace)**:
    - ç¡®ä¿ç›®å½• `docs/planning/<è¿­ä»£åç§°>/` å­˜åœ¨ã€‚

3.  **å®ä¾‹åŒ–æ¨¡æ¿ (Instantiate Templates)**:
    - ä»æ ‡å‡†åº“ `.trae/ralph-assets/templates/` è¯»å–æ¨¡æ¿ã€‚
    - å°†å…¶å¤åˆ¶åˆ° `docs/planning/<è¿­ä»£åç§°>/` ä¸‹ã€‚
    - **æ³¨æ„**: å¯¹äºå°å‹è¿­ä»£ï¼Œå¯ä»¥åªåˆ›å»ºå¿…è¦çš„æ–‡æ¡£ï¼ˆå¦‚ä»… `01-requirements.md` å’Œ `04-ralph-tasks.md`ï¼‰ï¼Œä¸å¿…å…¨éƒ¨å¤åˆ¶ã€‚

4.  **åˆå§‹åŒ–ä¸æ‰§è¡Œ**:
    - **å¿…é¡»**è°ƒç”¨ Skill `ralph-planner`ã€‚
    - Skill ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶åˆå§‹åŒ– `RALPH_STATE.md`ï¼ŒéšåæŒ‡å¼•ä½ å®Œæˆè§„åˆ’è¿­ä»£ã€‚

## 4. æ–‡æ¡£æ ‡å‡†ä¸å‚è€ƒ
- **æ¨¡æ¿ä½ç½®**: `.trae/ralph-assets/templates/` (åªè¯»æ ‡å‡†)
- **å·¥ä½œä½ç½®**: `docs/planning/<è¿­ä»£åç§°>/` (è¯»å†™å®ä¾‹)

åœ¨ç¼–å†™æ–‡æ¡£æ—¶ï¼Œå¿…é¡»å‚è€ƒæ ‡å‡†æ¨¡æ¿çš„ç»“æ„ã€‚å…·ä½“çš„æ–‡æ¡£æ¸…å•ç”±å½“å‰æ¿€æ´»çš„ **Routine Skill** (å¦‚ `ralph-web-routine`) å®šä¹‰ã€‚

**æ¨èç»“æ„ (Web é¡¹ç›®ç¤ºä¾‹)**:
```text
docs/
â””â”€â”€ planning/
    â”œâ”€â”€ v1.0-initial-launch/       <-- [è¿­ä»£ 1] åˆå§‹ç‰ˆæœ¬
    â”‚   â”œâ”€â”€ 01-requirements.md     <-- éœ€æ±‚è§„æ ¼ (PRD)
    â”‚   â”œâ”€â”€ 02-architecture.md     <-- æ¶æ„è®¾è®¡
    â”‚   â”œâ”€â”€ 04-ralph-tasks.md      <-- ä»»åŠ¡æ‹†è§£
    â”‚   â”œâ”€â”€ 05-test-plan.md        <-- æµ‹è¯•è®¡åˆ’
    â”‚   â””â”€â”€ 06-learnings.md        <-- ç»éªŒæ€»ç»“
    â”œâ”€â”€ v1.1-payment-feature/      <-- [è¿­ä»£ 2] æ”¯ä»˜åŠŸèƒ½
    â”‚   â”œâ”€â”€ 01-requirements.md
    â”‚   â”œâ”€â”€ 05-test-plan.md
    â”‚   â””â”€â”€ ...
    â””â”€â”€ ...
```
